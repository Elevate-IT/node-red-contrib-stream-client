<script type="text/javascript">
  RED.nodes.registerType('stream-client', {
    category: 'input',
    color: '#a6bbcf',
    defaults: {
      name: { value: '' },
      url: { value: '', required: true },
      token: { value: '' },
      headers: { value: '' },
      query: { value: '' },
      reconnectDelay: { value: 5000 },
      debug: { value: false }
    },
    inputs: 0,
    outputs: 1,
    icon: 'font-awesome/fa-plug',
    label: function () {
      return this.name || 'stream-client';
    },
    oneditprepare: function () {
      // Explicitly set the values of the input fields when the editor opens
      $("#node-input-name").val(this.name);
      $("#node-input-url").val(this.url);
      $("#node-input-token").val(this.token);
      $("#node-input-headers").val(this.headers);
      $("#node-input-query").val(this.query);
      $("#node-input-reconnectDelay").val(this.reconnectDelay);
      // For checkboxes, use .prop('checked', ...)
      $("#node-input-debug").prop('checked', this.debug);

      console.log("Stream-client editor opened and fields populated.");
    },
    oneditsave: function() {
        console.log("Stream-client editor saved.");
    }
  });
</script>

<!-- Minimal HTML for testing if anything renders -->
<div class="form-row">
  <label for="node-input-name"><i class="icon-tag"></i> Name (Test)</label>
  <input type="text" id="node-input-name-test">
</div>
